{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Prom/mvp-roc/admin/app/lib/api.ts"],"sourcesContent":["const BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost:3001\";\n\nclass AdminApiClient {\n  private baseUrl: string;\n\n  constructor(baseUrl: string) {\n    this.baseUrl = baseUrl;\n  }\n\n  private getToken(): string | null {\n    if (typeof window === \"undefined\") return null;\n    return localStorage.getItem(\"admin_token\");\n  }\n\n  setToken(token: string, userId: string, userName: string, role: string) {\n    if (typeof window === \"undefined\") return;\n    localStorage.setItem(\"admin_token\", token);\n    localStorage.setItem(\"admin_id\", userId);\n    localStorage.setItem(\"admin_name\", userName);\n    localStorage.setItem(\"admin_role\", role);\n    // Cookie para middleware\n    document.cookie = `admin_token=${token}; path=/; max-age=${7 * 24 * 60 * 60}; SameSite=Lax`;\n  }\n\n  clearAuth() {\n    if (typeof window === \"undefined\") return;\n    localStorage.removeItem(\"admin_token\");\n    localStorage.removeItem(\"admin_id\");\n    localStorage.removeItem(\"admin_name\");\n    localStorage.removeItem(\"admin_role\");\n    document.cookie = \"admin_token=; path=/; max-age=0\";\n  }\n\n  isAuthenticated(): boolean {\n    return !!this.getToken();\n  }\n\n  getAdminName(): string {\n    if (typeof window === \"undefined\") return \"\";\n    return localStorage.getItem(\"admin_name\") || \"Admin\";\n  }\n\n  getAdminRole(): string {\n    if (typeof window === \"undefined\") return \"\";\n    return localStorage.getItem(\"admin_role\") || \"admin\";\n  }\n\n  private async request<T>(endpoint: string, options: RequestInit = {}): Promise<T> {\n    const token = this.getToken();\n    const headers: Record<string, string> = {\n      \"Content-Type\": \"application/json\",\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\n    };\n\n    const response = await fetch(`${this.baseUrl}${endpoint}`, {\n      ...options,\n      headers,\n    });\n\n    let data: any;\n    try {\n      data = await response.json();\n    } catch {\n      data = { message: \"Erro ao processar resposta\" };\n    }\n\n    if (!response.ok) {\n      if (response.status === 401) {\n        this.clearAuth();\n        if (typeof window !== \"undefined\") {\n          window.location.href = \"/login\";\n        }\n      }\n      throw { message: data?.message || `Erro ${response.status}`, status: response.status };\n    }\n\n    return data;\n  }\n\n  // Auth\n  async login(email: string, password: string) {\n    const data = await this.request<{\n      user: { id: string; name: string; email: string; role: string };\n      token: string;\n    }>(\"/auth/login\", {\n      method: \"POST\",\n      body: JSON.stringify({ email, password }),\n    });\n\n    if (!data.user.role || ![\"admin\", \"super_admin\"].includes(data.user.role)) {\n      throw { message: \"Acesso restrito a administradores\", status: 403 };\n    }\n\n    this.setToken(data.token, data.user.id, data.user.name || \"Admin\", data.user.role);\n    return data;\n  }\n\n  // Dashboard\n  async getDashboard() {\n    return this.request<{\n      totalUsers: number;\n      activePasses: number;\n      estimatedRevenue: number;\n      vouchers: { total: number; available: number; used: number; expired: number };\n      recentValidations: any[];\n    }>(\"/admin/dashboard\");\n  }\n\n  // Users\n  async getUsers(params?: { page?: number; limit?: number; search?: string; status?: string }) {\n    const query = new URLSearchParams();\n    if (params?.page) query.set(\"page\", params.page.toString());\n    if (params?.limit) query.set(\"limit\", params.limit.toString());\n    if (params?.search) query.set(\"search\", params.search);\n    if (params?.status) query.set(\"status\", params.status);\n    return this.request<{ data: any[]; total: number; page: number; totalPages: number }>(\n      `/admin/users?${query}`\n    );\n  }\n\n  async getUserDetail(id: string) {\n    return this.request<any>(`/admin/users/${id}`);\n  }\n\n  async suspendUser(id: string) {\n    return this.request<{ message: string }>(`/admin/users/${id}/suspend`, { method: \"POST\" });\n  }\n\n  async activateUser(id: string) {\n    return this.request<{ message: string }>(`/admin/users/${id}/activate`, { method: \"POST\" });\n  }\n\n  // Restaurants\n  async getRestaurants(params?: { page?: number; limit?: number; search?: string; active?: string }) {\n    const query = new URLSearchParams();\n    if (params?.page) query.set(\"page\", params.page.toString());\n    if (params?.limit) query.set(\"limit\", params.limit.toString());\n    if (params?.search) query.set(\"search\", params.search);\n    if (params?.active) query.set(\"active\", params.active);\n    return this.request<{ data: any[]; total: number; page: number; totalPages: number }>(\n      `/admin/restaurants?${query}`\n    );\n  }\n\n  async createRestaurant(data: { name: string; city: string; discount_label: string; image_url?: string; category?: string; description?: string }) {\n    return this.request<any>(\"/admin/restaurants\", { method: \"POST\", body: JSON.stringify(data) });\n  }\n\n  async updateRestaurant(id: number, data: any) {\n    return this.request<any>(`/admin/restaurants/${id}`, { method: \"PUT\", body: JSON.stringify(data) });\n  }\n\n  async toggleRestaurant(id: number) {\n    return this.request<any>(`/admin/restaurants/${id}/toggle`, { method: \"PATCH\" });\n  }\n\n  // Vouchers\n  async getVouchers(params?: { page?: number; limit?: number; status?: string; search?: string; user_id?: string; restaurant_id?: string }) {\n    const query = new URLSearchParams();\n    if (params?.page) query.set(\"page\", params.page.toString());\n    if (params?.limit) query.set(\"limit\", params.limit.toString());\n    if (params?.status) query.set(\"status\", params.status);\n    if (params?.search) query.set(\"search\", params.search);\n    if (params?.user_id) query.set(\"user_id\", params.user_id);\n    if (params?.restaurant_id) query.set(\"restaurant_id\", params.restaurant_id);\n    return this.request<{ data: any[]; total: number; page: number; totalPages: number }>(\n      `/admin/vouchers?${query}`\n    );\n  }\n\n  async manualValidateVoucher(id: string) {\n    return this.request<any>(`/admin/vouchers/${id}/validate`, { method: \"POST\" });\n  }\n\n  // Audit Logs\n  async getAuditLogs(params?: { page?: number; limit?: number; action?: string; admin_id?: string }) {\n    const query = new URLSearchParams();\n    if (params?.page) query.set(\"page\", params.page.toString());\n    if (params?.limit) query.set(\"limit\", params.limit.toString());\n    if (params?.action) query.set(\"action\", params.action);\n    if (params?.admin_id) query.set(\"admin_id\", params.admin_id);\n    return this.request<{ data: any[]; total: number; page: number; totalPages: number }>(\n      `/admin/audit-logs?${query}`\n    );\n  }\n}\n\nexport const adminApi = new AdminApiClient(BACKEND_URL);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///C:/Prom/mvp-roc/admin/app/components/AdminSidebar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport {\n  ChartBar,\n  Users,\n  ForkKnife,\n  Ticket,\n  ClockCounterClockwise,\n  ArrowSquareOut,\n  List,\n  X,\n} from \"@phosphor-icons/react\";\n\ninterface NavItem {\n  label: string;\n  href: string;\n  icon: React.ReactNode;\n}\n\nconst navItems: NavItem[] = [\n  {\n    label: \"Dashboard\",\n    href: \"/dashboard\",\n    icon: <ChartBar size={22} />,\n  },\n  {\n    label: \"Usuarios\",\n    href: \"/dashboard/users\",\n    icon: <Users size={22} />,\n  },\n  {\n    label: \"Restaurantes\",\n    href: \"/dashboard/restaurants\",\n    icon: <ForkKnife size={22} />,\n  },\n  {\n    label: \"Vouchers\",\n    href: \"/dashboard/vouchers\",\n    icon: <Ticket size={22} />,\n  },\n  {\n    label: \"Audit Logs\",\n    href: \"/dashboard/audit-logs\",\n    icon: <ClockCounterClockwise size={22} />,\n  },\n];\n\nexport function AdminSidebar() {\n  const pathname = usePathname();\n  const [mobileOpen, setMobileOpen] = useState(false);\n\n  const isActive = (href: string) => {\n    if (href === \"/dashboard\") {\n      return pathname === \"/dashboard\";\n    }\n    return pathname.startsWith(href);\n  };\n\n  const sidebarContent = (\n    <>\n      {/* Logo */}\n      <div className=\"flex items-center gap-3 px-6 py-6 border-b border-white/10\">\n        <div className=\"w-9 h-9 rounded-lg bg-[var(--color-roc-primary)] flex items-center justify-center\">\n          <span className=\"text-white font-bold text-sm\">R</span>\n        </div>\n        <span className=\"text-white text-lg font-semibold tracking-tight\">\n          ROC Admin\n        </span>\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"flex-1 px-3 py-4 space-y-1 overflow-y-auto\">\n        {navItems.map((item) => {\n          const active = isActive(item.href);\n          return (\n            <Link\n              key={item.href}\n              href={item.href}\n              onClick={() => setMobileOpen(false)}\n              className={`\n                flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium\n                transition-colors duration-150\n                ${\n                  active\n                    ? \"bg-[var(--color-admin-sidebar-active)] text-white\"\n                    : \"text-slate-300 hover:bg-[var(--color-admin-sidebar-hover)] hover:text-white\"\n                }\n              `}\n            >\n              <span className={active ? \"text-white\" : \"text-slate-400\"}>\n                {item.icon}\n              </span>\n              {item.label}\n            </Link>\n          );\n        })}\n      </nav>\n\n      {/* External link */}\n      <div className=\"px-3 pb-4 border-t border-white/10 pt-4\">\n        <a\n          href=\"http://localhost:3000\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium\n            text-slate-400 hover:bg-[var(--color-admin-sidebar-hover)] hover:text-white\n            transition-colors duration-150\"\n        >\n          <ArrowSquareOut size={22} />\n          Abrir site\n        </a>\n      </div>\n    </>\n  );\n\n  return (\n    <>\n      {/* Mobile hamburger button */}\n      <button\n        type=\"button\"\n        onClick={() => setMobileOpen(!mobileOpen)}\n        className=\"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-lg\n          bg-[var(--color-admin-sidebar)] text-white shadow-medium\"\n        aria-label={mobileOpen ? \"Fechar menu\" : \"Abrir menu\"}\n      >\n        {mobileOpen ? <X size={24} /> : <List size={24} />}\n      </button>\n\n      {/* Mobile overlay */}\n      {mobileOpen && (\n        <div\n          className=\"lg:hidden fixed inset-0 bg-black/50 z-30\"\n          onClick={() => setMobileOpen(false)}\n        />\n      )}\n\n      {/* Sidebar - mobile */}\n      <aside\n        className={`\n          lg:hidden fixed inset-y-0 left-0 z-40 w-64 flex flex-col\n          bg-[var(--color-admin-sidebar)] transform transition-transform duration-300 ease-in-out\n          ${mobileOpen ? \"translate-x-0\" : \"-translate-x-full\"}\n        `}\n      >\n        {sidebarContent}\n      </aside>\n\n      {/* Sidebar - desktop */}\n      <aside\n        className=\"hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 lg:left-0 z-20\n          bg-[var(--color-admin-sidebar)]\"\n      >\n        {sidebarContent}\n      </aside>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALA;;;;;;AAsBA,MAAM,WAAsB;IAC1B;QACE,OAAO;QACP,MAAM;QACN,oBAAM,uPAAC,kMAAQ;YAAC,MAAM;;;;;;IACxB;IACA;QACE,OAAO;QACP,MAAM;QACN,oBAAM,uPAAC,4LAAK;YAAC,MAAM;;;;;;IACrB;IACA;QACE,OAAO;QACP,MAAM;QACN,oBAAM,uPAAC,oMAAS;YAAC,MAAM;;;;;;IACzB;IACA;QACE,OAAO;QACP,MAAM;QACN,oBAAM,uPAAC,8LAAM;YAAC,MAAM;;;;;;IACtB;IACA;QACE,OAAO;QACP,MAAM;QACN,oBAAM,uPAAC,4NAAqB;YAAC,MAAM;;;;;;IACrC;CACD;AAEM,SAAS;IACd,MAAM,WAAW,IAAA,0JAAW;IAC5B,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,0NAAQ,EAAC;IAE7C,MAAM,WAAW,CAAC;QAChB,IAAI,SAAS,cAAc;YACzB,OAAO,aAAa;QACtB;QACA,OAAO,SAAS,UAAU,CAAC;IAC7B;IAEA,MAAM,+BACJ;;0BAEE,uPAAC;gBAAI,WAAU;;kCACb,uPAAC;wBAAI,WAAU;kCACb,cAAA,uPAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;kCAEjD,uPAAC;wBAAK,WAAU;kCAAkD;;;;;;;;;;;;0BAMpE,uPAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAC;oBACb,MAAM,SAAS,SAAS,KAAK,IAAI;oBACjC,qBACE,uPAAC,gLAAI;wBAEH,MAAM,KAAK,IAAI;wBACf,SAAS,IAAM,cAAc;wBAC7B,WAAW,CAAC;;;gBAGV,EACE,SACI,sDACA,8EACL;cACH,CAAC;;0CAED,uPAAC;gCAAK,WAAW,SAAS,eAAe;0CACtC,KAAK,IAAI;;;;;;4BAEX,KAAK,KAAK;;uBAhBN,KAAK,IAAI;;;;;gBAmBpB;;;;;;0BAIF,uPAAC;gBAAI,WAAU;0BACb,cAAA,uPAAC;oBACC,MAAK;oBACL,QAAO;oBACP,KAAI;oBACJ,WAAU;;sCAIV,uPAAC,8MAAc;4BAAC,MAAM;;;;;;wBAAM;;;;;;;;;;;;;;IAOpC,qBACE;;0BAEE,uPAAC;gBACC,MAAK;gBACL,SAAS,IAAM,cAAc,CAAC;gBAC9B,WAAU;gBAEV,cAAY,aAAa,gBAAgB;0BAExC,2BAAa,uPAAC,oLAAC;oBAAC,MAAM;;;;;yCAAS,uPAAC,0LAAI;oBAAC,MAAM;;;;;;;;;;;YAI7C,4BACC,uPAAC;gBACC,WAAU;gBACV,SAAS,IAAM,cAAc;;;;;;0BAKjC,uPAAC;gBACC,WAAW,CAAC;;;UAGV,EAAE,aAAa,kBAAkB,oBAAoB;QACvD,CAAC;0BAEA;;;;;;0BAIH,uPAAC;gBACC,WAAU;0BAGT;;;;;;;;AAIT"}},
    {"offset": {"line": 448, "column": 0}, "map": {"version":3,"sources":["file:///C:/Prom/mvp-roc/admin/app/components/AdminTopbar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { SignOut } from \"@phosphor-icons/react\";\nimport { adminApi } from \"../lib/api\";\n\nconst pageTitles: Record<string, string> = {\n  \"/dashboard\": \"Dashboard\",\n  \"/dashboard/users\": \"Usuarios\",\n  \"/dashboard/restaurants\": \"Restaurantes\",\n  \"/dashboard/vouchers\": \"Vouchers\",\n  \"/dashboard/audit-logs\": \"Audit Logs\",\n};\n\nfunction derivePageTitle(pathname: string): string {\n  // Exact match first\n  if (pageTitles[pathname]) {\n    return pageTitles[pathname];\n  }\n\n  // Check for sub-paths (e.g. /dashboard/users/123)\n  const sortedPaths = Object.keys(pageTitles).sort(\n    (a, b) => b.length - a.length\n  );\n  for (const path of sortedPaths) {\n    if (pathname.startsWith(path)) {\n      return pageTitles[path];\n    }\n  }\n\n  return \"Admin\";\n}\n\nexport function AdminTopbar() {\n  const pathname = usePathname();\n  const router = useRouter();\n  const [adminName, setAdminName] = useState(\"Admin\");\n  const [adminRole, setAdminRole] = useState(\"admin\");\n\n  useEffect(() => {\n    setAdminName(adminApi.getAdminName());\n    setAdminRole(adminApi.getAdminRole());\n  }, []);\n\n  const handleLogout = () => {\n    adminApi.clearAuth();\n    router.push(\"/login\");\n  };\n\n  const title = derivePageTitle(pathname);\n\n  const roleLabel =\n    adminRole === \"super_admin\" ? \"Super Admin\" : \"Admin\";\n\n  return (\n    <header\n      className=\"sticky top-0 z-10 h-16 flex items-center justify-between px-6 lg:px-8\n        bg-white border-b border-[var(--color-border)]\"\n    >\n      {/* Left: page title (offset on mobile for hamburger button) */}\n      <h1 className=\"text-xl font-semibold text-[var(--color-text-dark)] pl-12 lg:pl-0\">\n        {title}\n      </h1>\n\n      {/* Right: admin info + logout */}\n      <div className=\"flex items-center gap-4\">\n        <div className=\"hidden sm:flex flex-col items-end\">\n          <span className=\"text-sm font-medium text-[var(--color-text-dark)]\">\n            {adminName}\n          </span>\n          <span\n            className={`\n              text-[10px] font-semibold uppercase tracking-wider px-2 py-0.5 rounded-full\n              ${\n                adminRole === \"super_admin\"\n                  ? \"bg-purple-100 text-purple-700\"\n                  : \"bg-blue-100 text-blue-700\"\n              }\n            `}\n          >\n            {roleLabel}\n          </span>\n        </div>\n\n        <button\n          onClick={handleLogout}\n          title=\"Sair\"\n          className=\"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium\n            text-[var(--color-text-medium)] hover:text-[var(--color-roc-danger)]\n            hover:bg-red-50 transition-colors duration-150\"\n        >\n          <SignOut size={20} />\n          <span className=\"hidden sm:inline\">Sair</span>\n        </button>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,aAAqC;IACzC,cAAc;IACd,oBAAoB;IACpB,0BAA0B;IAC1B,uBAAuB;IACvB,yBAAyB;AAC3B;AAEA,SAAS,gBAAgB,QAAgB;IACvC,oBAAoB;IACpB,IAAI,UAAU,CAAC,SAAS,EAAE;QACxB,OAAO,UAAU,CAAC,SAAS;IAC7B;IAEA,kDAAkD;IAClD,MAAM,cAAc,OAAO,IAAI,CAAC,YAAY,IAAI,CAC9C,CAAC,GAAG,IAAM,EAAE,MAAM,GAAG,EAAE,MAAM;IAE/B,KAAK,MAAM,QAAQ,YAAa;QAC9B,IAAI,SAAS,UAAU,CAAC,OAAO;YAC7B,OAAO,UAAU,CAAC,KAAK;QACzB;IACF;IAEA,OAAO;AACT;AAEO,SAAS;IACd,MAAM,WAAW,IAAA,0JAAW;IAC5B,MAAM,SAAS,IAAA,wJAAS;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,0NAAQ,EAAC;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,0NAAQ,EAAC;IAE3C,IAAA,2NAAS,EAAC;QACR,aAAa,sIAAQ,CAAC,YAAY;QAClC,aAAa,sIAAQ,CAAC,YAAY;IACpC,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,sIAAQ,CAAC,SAAS;QAClB,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,QAAQ,gBAAgB;IAE9B,MAAM,YACJ,cAAc,gBAAgB,gBAAgB;IAEhD,qBACE,uPAAC;QACC,WAAU;;0BAIV,uPAAC;gBAAG,WAAU;0BACX;;;;;;0BAIH,uPAAC;gBAAI,WAAU;;kCACb,uPAAC;wBAAI,WAAU;;0CACb,uPAAC;gCAAK,WAAU;0CACb;;;;;;0CAEH,uPAAC;gCACC,WAAW,CAAC;;cAEV,EACE,cAAc,gBACV,kCACA,4BACL;YACH,CAAC;0CAEA;;;;;;;;;;;;kCAIL,uPAAC;wBACC,SAAS;wBACT,OAAM;wBACN,WAAU;;0CAIV,uPAAC,gMAAO;gCAAC,MAAM;;;;;;0CACf,uPAAC;gCAAK,WAAU;0CAAmB;;;;;;;;;;;;;;;;;;;;;;;;AAK7C"}},
    {"offset": {"line": 584, "column": 0}, "map": {"version":3,"sources":["file:///C:/Prom/mvp-roc/admin/app/dashboard/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { adminApi } from \"../lib/api\";\nimport { AdminSidebar } from \"../components/AdminSidebar\";\nimport { AdminTopbar } from \"../components/AdminTopbar\";\n\nexport default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const router = useRouter();\n  const [ready, setReady] = useState(false);\n\n  useEffect(() => {\n    if (!adminApi.isAuthenticated()) {\n      router.replace(\"/login\");\n    } else {\n      setReady(true);\n    }\n  }, [router]);\n\n  if (!ready) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center\">\n        <div className=\"h-8 w-8 animate-spin rounded-full border-4 border-[var(--color-border)] border-t-[var(--color-roc-primary)]\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex h-screen overflow-hidden\">\n      <AdminSidebar />\n      <div className=\"flex flex-1 flex-col overflow-hidden lg:ml-64\">\n        <AdminTopbar />\n        <main className=\"flex-1 overflow-y-auto p-6\">{children}</main>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQe,SAAS,gBAAgB,EACtC,QAAQ,EAGT;IACC,MAAM,SAAS,IAAA,wJAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,0NAAQ,EAAC;IAEnC,IAAA,2NAAS,EAAC;QACR,IAAI,CAAC,sIAAQ,CAAC,eAAe,IAAI;YAC/B,OAAO,OAAO,CAAC;QACjB,OAAO;YACL,SAAS;QACX;IACF,GAAG;QAAC;KAAO;IAEX,IAAI,CAAC,OAAO;QACV,qBACE,uPAAC;YAAI,WAAU;sBACb,cAAA,uPAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,qBACE,uPAAC;QAAI,WAAU;;0BACb,uPAAC,2JAAY;;;;;0BACb,uPAAC;gBAAI,WAAU;;kCACb,uPAAC,yJAAW;;;;;kCACZ,uPAAC;wBAAK,WAAU;kCAA8B;;;;;;;;;;;;;;;;;;AAItD"}}]
}