(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93244,e=>{"use strict";let t=new class{baseUrl;constructor(e){this.baseUrl=e}getToken(){return localStorage.getItem("admin_token")}setToken(e,t,a,s){localStorage.setItem("admin_token",e),localStorage.setItem("admin_id",t),localStorage.setItem("admin_name",a),localStorage.setItem("admin_role",s),document.cookie=`admin_token=${e}; path=/; max-age=604800; SameSite=Lax`}clearAuth(){localStorage.removeItem("admin_token"),localStorage.removeItem("admin_id"),localStorage.removeItem("admin_name"),localStorage.removeItem("admin_role"),document.cookie="admin_token=; path=/; max-age=0"}isAuthenticated(){return!!this.getToken()}getAdminName(){return localStorage.getItem("admin_name")||"Admin"}getAdminRole(){return localStorage.getItem("admin_role")||"admin"}async request(e,t={}){let a,s=this.getToken(),r={"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{}},i=await fetch(`${this.baseUrl}${e}`,{...t,headers:r});try{a=await i.json()}catch{a={message:"Erro ao processar resposta"}}if(!i.ok)throw 401===i.status&&(this.clearAuth(),window.location.href="/login"),{message:a?.message||`Erro ${i.status}`,status:i.status};return a}async login(e,t){let a=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});if(!a.user.role||!["admin","super_admin"].includes(a.user.role))throw{message:"Acesso restrito a administradores",status:403};return this.setToken(a.token,a.user.id,a.user.name||"Admin",a.user.role),a}async getDashboard(){return this.request("/admin/dashboard")}async getUsers(e){let t=new URLSearchParams;return e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.search&&t.set("search",e.search),e?.status&&t.set("status",e.status),this.request(`/admin/users?${t}`)}async getUserDetail(e){return this.request(`/admin/users/${e}`)}async suspendUser(e){return this.request(`/admin/users/${e}/suspend`,{method:"POST"})}async activateUser(e){return this.request(`/admin/users/${e}/activate`,{method:"POST"})}async getRestaurants(e){let t=new URLSearchParams;return e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.search&&t.set("search",e.search),e?.active&&t.set("active",e.active),this.request(`/admin/restaurants?${t}`)}async createRestaurant(e){return this.request("/admin/restaurants",{method:"POST",body:JSON.stringify(e)})}async updateRestaurant(e,t){return this.request(`/admin/restaurants/${e}`,{method:"PUT",body:JSON.stringify(t)})}async toggleRestaurant(e){return this.request(`/admin/restaurants/${e}/toggle`,{method:"PATCH"})}async getVouchers(e){let t=new URLSearchParams;return e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.status&&t.set("status",e.status),e?.search&&t.set("search",e.search),e?.user_id&&t.set("user_id",e.user_id),e?.restaurant_id&&t.set("restaurant_id",e.restaurant_id),this.request(`/admin/vouchers?${t}`)}async manualValidateVoucher(e){return this.request(`/admin/vouchers/${e}/validate`,{method:"POST"})}async getAuditLogs(e){let t=new URLSearchParams;return e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.action&&t.set("action",e.action),e?.admin_id&&t.set("admin_id",e.admin_id),this.request(`/admin/audit-logs?${t}`)}}("http://localhost:3001");e.s(["adminApi",0,t])},58695,(e,t,a)=>{t.exports=e.r(1585)},57211,e=>{"use strict";var t=e.i(12578),a=e.i(90258),s=e.i(58695),r=e.i(93244);function i(){let e=(0,s.useRouter)();return(0,a.useEffect)(()=>{r.adminApi.isAuthenticated()?e.replace("/dashboard"):e.replace("/login")},[e]),(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,t.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-[var(--color-border)] border-t-[var(--color-roc-primary)]"})})}e.s(["default",()=>i])}]);