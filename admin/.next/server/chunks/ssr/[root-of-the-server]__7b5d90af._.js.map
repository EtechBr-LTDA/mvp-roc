{"version":3,"sources":["../../../../../admin/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../admin/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../admin/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../admin/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../admin/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../admin/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../admin/app/lib/api.ts","../../../../../admin/app/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","const BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost:3001\";\n\nclass AdminApiClient {\n  private baseUrl: string;\n\n  constructor(baseUrl: string) {\n    this.baseUrl = baseUrl;\n  }\n\n  private getToken(): string | null {\n    if (typeof window === \"undefined\") return null;\n    return localStorage.getItem(\"admin_token\");\n  }\n\n  setToken(token: string, userId: string, userName: string, role: string) {\n    if (typeof window === \"undefined\") return;\n    localStorage.setItem(\"admin_token\", token);\n    localStorage.setItem(\"admin_id\", userId);\n    localStorage.setItem(\"admin_name\", userName);\n    localStorage.setItem(\"admin_role\", role);\n    // Cookie para middleware\n    document.cookie = `admin_token=${token}; path=/; max-age=${7 * 24 * 60 * 60}; SameSite=Lax`;\n  }\n\n  clearAuth() {\n    if (typeof window === \"undefined\") return;\n    localStorage.removeItem(\"admin_token\");\n    localStorage.removeItem(\"admin_id\");\n    localStorage.removeItem(\"admin_name\");\n    localStorage.removeItem(\"admin_role\");\n    document.cookie = \"admin_token=; path=/; max-age=0\";\n  }\n\n  isAuthenticated(): boolean {\n    return !!this.getToken();\n  }\n\n  getAdminName(): string {\n    if (typeof window === \"undefined\") return \"\";\n    return localStorage.getItem(\"admin_name\") || \"Admin\";\n  }\n\n  getAdminRole(): string {\n    if (typeof window === \"undefined\") return \"\";\n    return localStorage.getItem(\"admin_role\") || \"admin\";\n  }\n\n  private async request<T>(endpoint: string, options: RequestInit = {}): Promise<T> {\n    const token = this.getToken();\n    const headers: Record<string, string> = {\n      \"Content-Type\": \"application/json\",\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\n    };\n\n    const response = await fetch(`${this.baseUrl}${endpoint}`, {\n      ...options,\n      headers,\n    });\n\n    let data: any;\n    try {\n      data = await response.json();\n    } catch {\n      data = { message: \"Erro ao processar resposta\" };\n    }\n\n    if (!response.ok) {\n      if (response.status === 401) {\n        this.clearAuth();\n        if (typeof window !== \"undefined\") {\n          window.location.href = \"/login\";\n        }\n      }\n      throw { message: data?.message || `Erro ${response.status}`, status: response.status };\n    }\n\n    return data;\n  }\n\n  // Auth\n  async login(email: string, password: string) {\n    const data = await this.request<{\n      user: { id: string; name: string; email: string; role: string };\n      token: string;\n    }>(\"/auth/login\", {\n      method: \"POST\",\n      body: JSON.stringify({ email, password }),\n    });\n\n    if (!data.user.role || ![\"admin\", \"super_admin\"].includes(data.user.role)) {\n      throw { message: \"Acesso restrito a administradores\", status: 403 };\n    }\n\n    this.setToken(data.token, data.user.id, data.user.name || \"Admin\", data.user.role);\n    return data;\n  }\n\n  // Dashboard\n  async getDashboard() {\n    return this.request<{\n      totalUsers: number;\n      activePasses: number;\n      estimatedRevenue: number;\n      vouchers: { total: number; available: number; used: number; expired: number };\n      recentValidations: any[];\n    }>(\"/admin/dashboard\");\n  }\n\n  // Users\n  async getUsers(params?: { page?: number; limit?: number; search?: string; status?: string }) {\n    const query = new URLSearchParams();\n    if (params?.page) query.set(\"page\", params.page.toString());\n    if (params?.limit) query.set(\"limit\", params.limit.toString());\n    if (params?.search) query.set(\"search\", params.search);\n    if (params?.status) query.set(\"status\", params.status);\n    return this.request<{ data: any[]; total: number; page: number; totalPages: number }>(\n      `/admin/users?${query}`\n    );\n  }\n\n  async getUserDetail(id: string) {\n    return this.request<any>(`/admin/users/${id}`);\n  }\n\n  async suspendUser(id: string) {\n    return this.request<{ message: string }>(`/admin/users/${id}/suspend`, { method: \"POST\" });\n  }\n\n  async activateUser(id: string) {\n    return this.request<{ message: string }>(`/admin/users/${id}/activate`, { method: \"POST\" });\n  }\n\n  // Restaurants\n  async getRestaurants(params?: { page?: number; limit?: number; search?: string; active?: string }) {\n    const query = new URLSearchParams();\n    if (params?.page) query.set(\"page\", params.page.toString());\n    if (params?.limit) query.set(\"limit\", params.limit.toString());\n    if (params?.search) query.set(\"search\", params.search);\n    if (params?.active) query.set(\"active\", params.active);\n    return this.request<{ data: any[]; total: number; page: number; totalPages: number }>(\n      `/admin/restaurants?${query}`\n    );\n  }\n\n  async createRestaurant(data: { name: string; city: string; discount_label: string; image_url?: string; category?: string; description?: string }) {\n    return this.request<any>(\"/admin/restaurants\", { method: \"POST\", body: JSON.stringify(data) });\n  }\n\n  async updateRestaurant(id: number, data: any) {\n    return this.request<any>(`/admin/restaurants/${id}`, { method: \"PUT\", body: JSON.stringify(data) });\n  }\n\n  async toggleRestaurant(id: number) {\n    return this.request<any>(`/admin/restaurants/${id}/toggle`, { method: \"PATCH\" });\n  }\n\n  // Vouchers\n  async getVouchers(params?: { page?: number; limit?: number; status?: string; search?: string; user_id?: string; restaurant_id?: string }) {\n    const query = new URLSearchParams();\n    if (params?.page) query.set(\"page\", params.page.toString());\n    if (params?.limit) query.set(\"limit\", params.limit.toString());\n    if (params?.status) query.set(\"status\", params.status);\n    if (params?.search) query.set(\"search\", params.search);\n    if (params?.user_id) query.set(\"user_id\", params.user_id);\n    if (params?.restaurant_id) query.set(\"restaurant_id\", params.restaurant_id);\n    return this.request<{ data: any[]; total: number; page: number; totalPages: number }>(\n      `/admin/vouchers?${query}`\n    );\n  }\n\n  async manualValidateVoucher(id: string) {\n    return this.request<any>(`/admin/vouchers/${id}/validate`, { method: \"POST\" });\n  }\n\n  // Audit Logs\n  async getAuditLogs(params?: { page?: number; limit?: number; action?: string; admin_id?: string }) {\n    const query = new URLSearchParams();\n    if (params?.page) query.set(\"page\", params.page.toString());\n    if (params?.limit) query.set(\"limit\", params.limit.toString());\n    if (params?.action) query.set(\"action\", params.action);\n    if (params?.admin_id) query.set(\"admin_id\", params.admin_id);\n    return this.request<{ data: any[]; total: number; page: number; totalPages: number }>(\n      `/admin/audit-logs?${query}`\n    );\n  }\n}\n\nexport const adminApi = new AdminApiClient(BACKEND_URL);\n","\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { adminApi } from \"./lib/api\";\n\nexport default function AdminRoot() {\n  const router = useRouter();\n\n  useEffect(() => {\n    if (adminApi.isAuthenticated()) {\n      router.replace(\"/dashboard\");\n    } else {\n      router.replace(\"/login\");\n    }\n  }, [router]);\n\n  return (\n    <div className=\"flex min-h-screen items-center justify-center\">\n      <div className=\"h-8 w-8 animate-spin rounded-full border-4 border-[var(--color-border)] border-t-[var(--color-roc-primary)]\" />\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}